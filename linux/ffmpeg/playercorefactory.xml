<playercorefactory>
 <players>
   <player name="save url" type="ExternalPlayer" audio="false" video="true">
		<filename>/usr/bin/echo</filename>
     <args>"{0}" > "$HOME/Desktop/video-url-$(date +"%m-%d-%y-%H-%M").txt"</args>
     <hidexbmc>false</hidexbmc>
   </player>
   <player name="ffmpeg" type="ExternalPlayer" audio="false" video="true">
		<filename>/usr/bin/echo</filename>
     <args>"{0}" | while read url
do
VIDEOFILE=`echo "{0}" | grep -Eo '(http|https)://[a-zA-Z0-9./?=_@%-]*\.(mkv|mp4|avi|flv)'`
M3U8=`echo "{0}" | grep -Eo '(http|https)://[a-zA-Z0-9./?=_@%-]*\.(m3u8)'`
XFORWARD=`echo "{0}" | grep -Eo '(http|https)://[a-zA-Z0-9./?=_@%-]*\.(m3u8)\|X-Forwarded-For=[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}'`
XFORWARDIP=`echo "$XFORWARD" | grep -Eo '[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}'`
USEREF=`echo "{0}" | grep -Eo '(http|https)://[a-zA-Z0-9:0-9./?=_-]*\.(mkv|mp4|m3u8|avi|flv)\|User-Agent=[a-zA-Z]*/[0-9]{1,1}\.[0-9]{1,1}(.*)\&Referer=(http|https)://[a-zA-Z0-9./?=_-]*(/|\.html)'`
USERAGENT=`echo "$USEREF" | grep -Eo 'User-Agent=[a-zA-Z]*/[0-9]{1,1}\.[0-9]{1,1}(.[^&]*)'`
REFERER=`echo "$USEREF" | grep -Eo 'Referer=(http|https)://[a-zA-Z0-9./?=_-]*(/|\.html)' | sed 's/Referer=//'`
M3U8USERAGENT=`echo "{0}" | grep -Eo '(http|https)://[a-zA-Z0-9./?=_@%-]*\.(m3u8)\|user-agent=[a-zA-Z]*'`
M3U8UAG=`echo "$M3U8USERAGENT" | grep -Eo 'user-agent=[a-zA-Z]*' | sed 's/user-agent=//'`
M3U8UAGM3U8=`echo "$M3U8USERAGENT" | grep -Eo '(http|https)://[a-zA-Z0-9./?=_@%-]*\.(m3u8)'`

case "$url" in
	"$VIDEOFILE")
	ffmpeg -hide_banner -i "$VIDEOFILE" -c:v copy -c:a copy ${TFLAG} ${DURATION} -loglevel error "$HOME/Desktop/video-$(date +"%m-%d-%y-%H-%M").mkv" &
	;;
	"$M3U8")
	ffmpeg -hide_banner -i "$M3U8" -c:v copy -bsf:a aac_adtstoasc ${TFLAG} ${DURATION} -loglevel error "$HOME/Desktop/video-$(date +"%m-%d-%y-%H-%M").mkv" &
	;;
	"$XFORWARD")
	ffmpeg -hide_banner -headers 'X-Forwarded-For: '"$XFORWARDIP"''$'\r\n' -i "$M3U8" -c:v copy -bsf:a aac_adtstoasc ${TFLAG} ${DURATION} -loglevel error "$HOME/Desktop/video-$(date +"%m-%d-%y-%H-%M").mkv" &
	;;
	"$USEREF")
	ffmpeg -hide_banner -i  "$USERAGENT" -headers 'Referer: '"$REFERER"''$'\r\n' -i "$URL" -c:v copy -c:a copy ${TFLAG} ${DURATION} -loglevel error "$HOME/Desktop/video-$(date +"%H-%M-%m-%d-%y").mkv" &
	;;
	"$M3U8USERAGENT")
	ffmpeg -hide_banner -loglevel error -user-agent "$M3U8UAG" -i "$M3U8UAGM3U8" -c:v copy -bsf:a aac_adtstoasc ${TFLAG} ${DURATION} -loglevel error "$HOME/Desktop/video-$(date +"%H-%M-%m-%d-%y").mkv"
	;;
	*)
	ffmpeg -hide_banner -i "$VIDEOURL" -c:v copy -c:a copy ${TFLAG} ${DURATION} -loglevel error "$HOME/Desktop/video-$(date +"%m-%d-%y-%H-%M").mkv" &
	;;
esac
done</args>
     <hidexbmc>false</hidexbmc>
   </player>   
<player name="ffmpeg 30 mins" type="ExternalPlayer" audio="false" video="true">
		<filename>/usr/bin/echo</filename>
     <args>"{0}" | while read url
do
VIDEOFILE=`echo "{0}" | grep -Eo '(http|https)://[a-zA-Z0-9./?=_@%-]*\.(mkv|mp4|avi|flv)'`
M3U8=`echo "{0}" | grep -Eo '(http|https)://[a-zA-Z0-9./?=_@%-]*\.(m3u8)'`
XFORWARD=`echo "{0}" | grep -Eo '(http|https)://[a-zA-Z0-9./?=_@%-]*\.(m3u8)\|X-Forwarded-For=[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}'`
XFORWARDIP=`echo "$XFORWARD" | grep -Eo '[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}'`
USEREF=`echo "{0}" | grep -Eo '(http|https)://[a-zA-Z0-9:0-9./?=_-]*\.(mkv|mp4|m3u8|avi|flv)\|User-Agent=[a-zA-Z]*/[0-9]{1,1}\.[0-9]{1,1}(.*)\&Referer=(http|https)://[a-zA-Z0-9./?=_-]*(/|\.html)'`
USERAGENT=`echo "$USEREF" | grep -Eo 'User-Agent=[a-zA-Z]*/[0-9]{1,1}\.[0-9]{1,1}(.[^&]*)'`
REFERER=`echo "$USEREF" | grep -Eo 'Referer=(http|https)://[a-zA-Z0-9./?=_-]*(/|\.html)' | sed 's/Referer=//'`
M3U8USERAGENT=`echo "{0}" | grep -Eo '(http|https)://[a-zA-Z0-9./?=_@%-]*\.(m3u8)\|user-agent=[a-zA-Z]*'`
M3U8UAG=`echo "$M3U8USERAGENT" | grep -Eo 'user-agent=[a-zA-Z]*' | sed 's/user-agent=//'`
M3U8UAGM3U8=`echo "$M3U8USERAGENT" | grep -Eo '(http|https)://[a-zA-Z0-9./?=_@%-]*\.(m3u8)'`

case "$url" in
	"$VIDEOFILE")
	ffmpeg -hide_banner -i "$VIDEOFILE" -c:v copy -c:a copy -t 00:30:00 -loglevel error "$HOME/Desktop/video-$(date +"%m-%d-%y-%H-%M").mkv" &
	;;
	"$M3U8")
	ffmpeg -hide_banner -i "$M3U8" -c:v copy -bsf:a aac_adtstoasc -t 00:30:00 -loglevel error "$HOME/Desktop/video-$(date +"%m-%d-%y-%H-%M").mkv" &
	;;
	"$XFORWARD")
	ffmpeg -hide_banner -headers 'X-Forwarded-For: '"$XFORWARDIP"''$'\r\n' -i "$M3U8" -c:v copy -bsf:a aac_adtstoasc -t 00:30:00 -loglevel error "$HOME/Desktop/video-$(date +"%m-%d-%y-%H-%M").mkv" &
	;;
	"$USEREF")
	ffmpeg -hide_banner -i  "$USERAGENT" -headers 'Referer: '"$REFERER"''$'\r\n' -i "$URL" -c:v copy -c:a copy -t 00:30:00 -loglevel error "$HOME/Desktop/video-$(date +"%H-%M-%m-%d-%y").mkv" &
	;;
	"$M3U8USERAGENT")
	ffmpeg -hide_banner -loglevel error -user-agent "$M3U8UAG" -i "$M3U8UAGM3U8" -c:v copy -bsf:a aac_adtstoasc ${TFLAG} ${DURATION} -loglevel error "$HOME/Desktop/video-$(date +"%H-%M-%m-%d-%y").mkv"
	;;
	*)
	ffmpeg -hide_banner -i "$VIDEOURL" -c:v copy -c:a copy -t 00:30:00 -loglevel error "$HOME/Desktop/video-$(date +"%m-%d-%y-%H-%M").mkv" &
	;;
esac
done</args>
     <hidexbmc>false</hidexbmc>
   </player>
<player name="ffmpeg 1 hour" type="ExternalPlayer" audio="false" video="true">
		<filename>/usr/bin/echo</filename>
     <args>"{0}" | while read url
do
VIDEOFILE=`echo "{0}" | grep -Eo '(http|https)://[a-zA-Z0-9./?=_@%-]*\.(mkv|mp4|avi|flv)'`
M3U8=`echo "{0}" | grep -Eo '(http|https)://[a-zA-Z0-9./?=_@%-]*\.(m3u8)'`
XFORWARD=`echo "{0}" | grep -Eo '(http|https)://[a-zA-Z0-9./?=_@%-]*\.(m3u8)\|X-Forwarded-For=[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}'`
XFORWARDIP=`echo "$XFORWARD" | grep -Eo '[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}'`
USEREF=`echo "{0}" | grep -Eo '(http|https)://[a-zA-Z0-9:0-9./?=_-]*\.(mkv|mp4|m3u8|avi|flv)\|User-Agent=[a-zA-Z]*/[0-9]{1,1}\.[0-9]{1,1}(.*)\&Referer=(http|https)://[a-zA-Z0-9./?=_-]*(/|\.html)'`
USERAGENT=`echo "$USEREF" | grep -Eo 'User-Agent=[a-zA-Z]*/[0-9]{1,1}\.[0-9]{1,1}(.[^&]*)'`
REFERER=`echo "$USEREF" | grep -Eo 'Referer=(http|https)://[a-zA-Z0-9./?=_-]*(/|\.html)' | sed 's/Referer=//'`
M3U8USERAGENT=`echo "{0}" | grep -Eo '(http|https)://[a-zA-Z0-9./?=_@%-]*\.(m3u8)\|user-agent=[a-zA-Z]*'`
M3U8UAG=`echo "$M3U8USERAGENT" | grep -Eo 'user-agent=[a-zA-Z]*' | sed 's/user-agent=//'`
M3U8UAGM3U8=`echo "$M3U8USERAGENT" | grep -Eo '(http|https)://[a-zA-Z0-9./?=_@%-]*\.(m3u8)'`

case "$url" in
	"$VIDEOFILE")
	ffmpeg -hide_banner -i "$VIDEOFILE" -c:v copy -c:a copy -t 01:00:00 -loglevel error "$HOME/Desktop/video-$(date +"%m-%d-%y-%H-%M").mkv" &
	;;
	"$M3U8")
	ffmpeg -hide_banner -i "$M3U8" -c:v copy -bsf:a aac_adtstoasc -t 01:00:00 -loglevel error "$HOME/Desktop/video-$(date +"%m-%d-%y-%H-%M").mkv" &
	;;
	"$XFORWARD")
	ffmpeg -hide_banner -headers 'X-Forwarded-For: '"$XFORWARDIP"''$'\r\n' -i "$M3U8" -c:v copy -bsf:a aac_adtstoasc -t 01:00:00 -loglevel error "$HOME/Desktop/video-$(date +"%m-%d-%y-%H-%M").mkv" &
	;;
	"$USEREF")
	ffmpeg -hide_banner -i  "$USERAGENT" -headers 'Referer: '"$REFERER"''$'\r\n' -i "$URL" -c:v copy -c:a copy -t 01:00:00 -loglevel error "$HOME/Desktop/video-$(date +"%H-%M-%m-%d-%y").mkv" &
	;;
	"$M3U8USERAGENT")
	ffmpeg -hide_banner -loglevel error -user-agent "$M3U8UAG" -i "$M3U8UAGM3U8" -c:v copy -bsf:a aac_adtstoasc ${TFLAG} ${DURATION} -loglevel error "$HOME/Desktop/video-$(date +"%H-%M-%m-%d-%y").mkv"
	;;
	*)
	ffmpeg -hide_banner -i "$VIDEOURL" -c:v copy -c:a copy -t 01:00:00 -loglevel error "$HOME/Desktop/video-$(date +"%m-%d-%y-%H-%M").mkv" &
	;;
esac
done</args>
     <hidexbmc>false</hidexbmc>
   </player>
<player name="ffmpeg 2 hours" type="ExternalPlayer" audio="false" video="true">
		<filename>/usr/bin/echo</filename>
     <args>"{0}" | while read url
do
VIDEOFILE=`echo "{0}" | grep -Eo '(http|https)://[a-zA-Z0-9./?=_@%-]*\.(mkv|mp4|avi|flv)'`
M3U8=`echo "{0}" | grep -Eo '(http|https)://[a-zA-Z0-9./?=_@%-]*\.(m3u8)'`
XFORWARD=`echo "{0}" | grep -Eo '(http|https)://[a-zA-Z0-9./?=_@%-]*\.(m3u8)\|X-Forwarded-For=[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}'`
XFORWARDIP=`echo "$XFORWARD" | grep -Eo '[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}'`
USEREF=`echo "{0}" | grep -Eo '(http|https)://[a-zA-Z0-9:0-9./?=_-]*\.(mkv|mp4|m3u8|avi|flv)\|User-Agent=[a-zA-Z]*/[0-9]{1,1}\.[0-9]{1,1}(.*)\&Referer=(http|https)://[a-zA-Z0-9./?=_-]*(/|\.html)'`
USERAGENT=`echo "$USEREF" | grep -Eo 'User-Agent=[a-zA-Z]*/[0-9]{1,1}\.[0-9]{1,1}(.[^&]*)'`
REFERER=`echo "$USEREF" | grep -Eo 'Referer=(http|https)://[a-zA-Z0-9./?=_-]*(/|\.html)' | sed 's/Referer=//'`
M3U8USERAGENT=`echo "{0}" | grep -Eo '(http|https)://[a-zA-Z0-9./?=_@%-]*\.(m3u8)\|user-agent=[a-zA-Z]*'`
M3U8UAG=`echo "$M3U8USERAGENT" | grep -Eo 'user-agent=[a-zA-Z]*' | sed 's/user-agent=//'`
M3U8UAGM3U8=`echo "$M3U8USERAGENT" | grep -Eo '(http|https)://[a-zA-Z0-9./?=_@%-]*\.(m3u8)'`

case "$url" in
	"$VIDEOFILE")
	ffmpeg -hide_banner -i "$VIDEOFILE" -c:v copy -c:a copy -t 02:00:00 -loglevel error "$HOME/Desktop/video-$(date +"%m-%d-%y-%H-%M").mkv" &
	;;
	"$M3U8")
	ffmpeg -hide_banner -i "$M3U8" -c:v copy -bsf:a aac_adtstoasc -t 02:00:00 -loglevel error "$HOME/Desktop/video-$(date +"%m-%d-%y-%H-%M").mkv" &
	;;
	"$XFORWARD")
	ffmpeg -hide_banner -headers 'X-Forwarded-For: '"$XFORWARDIP"''$'\r\n' -i "$M3U8" -c:v copy -bsf:a aac_adtstoasc -t 02:00:00 -loglevel error "$HOME/Desktop/video-$(date +"%m-%d-%y-%H-%M").mkv" &
	;;
	"$USEREF")
	ffmpeg -hide_banner -i  "$USERAGENT" -headers 'Referer: '"$REFERER"''$'\r\n' -i "$URL" -c:v copy -c:a copy -t 02:00:00 -loglevel error "$HOME/Desktop/video-$(date +"%H-%M-%m-%d-%y").mkv" &
	;;
	"$M3U8USERAGENT")
	ffmpeg -hide_banner -loglevel error -user-agent "$M3U8UAG" -i "$M3U8UAGM3U8" -c:v copy -bsf:a aac_adtstoasc ${TFLAG} ${DURATION} -loglevel error "$HOME/Desktop/video-$(date +"%H-%M-%m-%d-%y").mkv"
	;;
	*)
	ffmpeg -hide_banner -i "$VIDEOURL" -c:v copy -c:a copy -t 02:00:00 -loglevel error "$HOME/Desktop/video-$(date +"%m-%d-%y-%H-%M").mkv" &
	;;
esac
done</args>
     <hidexbmc>false</hidexbmc>
   </player>
<player name="ffmpeg 3 hours" type="ExternalPlayer" audio="false" video="true">
		<filename>/usr/bin/echo</filename>
     <args>"{0}" | while read url
do
VIDEOFILE=`echo "{0}" | grep -Eo '(http|https)://[a-zA-Z0-9./?=_@%-]*\.(mkv|mp4|avi|flv)'`
M3U8=`echo "{0}" | grep -Eo '(http|https)://[a-zA-Z0-9./?=_@%-]*\.(m3u8)'`
XFORWARD=`echo "{0}" | grep -Eo '(http|https)://[a-zA-Z0-9./?=_@%-]*\.(m3u8)\|X-Forwarded-For=[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}'`
XFORWARDIP=`echo "$XFORWARD" | grep -Eo '[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}'`
USEREF=`echo "{0}" | grep -Eo '(http|https)://[a-zA-Z0-9:0-9./?=_-]*\.(mkv|mp4|m3u8|avi|flv)\|User-Agent=[a-zA-Z]*/[0-9]{1,1}\.[0-9]{1,1}(.*)\&Referer=(http|https)://[a-zA-Z0-9./?=_-]*(/|\.html)'`
USERAGENT=`echo "$USEREF" | grep -Eo 'User-Agent=[a-zA-Z]*/[0-9]{1,1}\.[0-9]{1,1}(.[^&]*)'`
REFERER=`echo "$USEREF" | grep -Eo 'Referer=(http|https)://[a-zA-Z0-9./?=_-]*(/|\.html)' | sed 's/Referer=//'`
M3U8USERAGENT=`echo "{0}" | grep -Eo '(http|https)://[a-zA-Z0-9./?=_@%-]*\.(m3u8)\|user-agent=[a-zA-Z]*'`
M3U8UAG=`echo "$M3U8USERAGENT" | grep -Eo 'user-agent=[a-zA-Z]*' | sed 's/user-agent=//'`
M3U8UAGM3U8=`echo "$M3U8USERAGENT" | grep -Eo '(http|https)://[a-zA-Z0-9./?=_@%-]*\.(m3u8)'`

case "$url" in
	"$VIDEOFILE")
	ffmpeg -hide_banner -i "$VIDEOFILE" -c:v copy -c:a copy -t 03:00:00 -loglevel error "$HOME/Desktop/video-$(date +"%m-%d-%y-%H-%M").mkv" &
	;;
	"$M3U8")
	ffmpeg -hide_banner -i "$M3U8" -c:v copy -bsf:a aac_adtstoasc -t 03:00:00 -loglevel error "$HOME/Desktop/video-$(date +"%m-%d-%y-%H-%M").mkv" &
	;;
	"$XFORWARD")
	ffmpeg -hide_banner -headers 'X-Forwarded-For: '"$XFORWARDIP"''$'\r\n' -i "$M3U8" -c:v copy -bsf:a aac_adtstoasc -t 03:00:00 -loglevel error "$HOME/Desktop/video-$(date +"%m-%d-%y-%H-%M").mkv" &
	;;
	"$USEREF")
	ffmpeg -hide_banner -i  "$USERAGENT" -headers 'Referer: '"$REFERER"''$'\r\n' -i "$URL" -c:v copy -c:a copy -t 03:00:00 -loglevel error "$HOME/Desktop/video-$(date +"%H-%M-%m-%d-%y").mkv" &
	;;
	"$M3U8USERAGENT")
	ffmpeg -hide_banner -loglevel error -user-agent "$M3U8UAG" -i "$M3U8UAGM3U8" -c:v copy -bsf:a aac_adtstoasc ${TFLAG} ${DURATION} -loglevel error "$HOME/Desktop/video-$(date +"%H-%M-%m-%d-%y").mkv"
	;;
	*)
	ffmpeg -hide_banner -i "$VIDEOURL" -c:v copy -c:a copy -t 03:00:00 -loglevel error "$HOME/Desktop/video-$(date +"%m-%d-%y-%H-%M").mkv" &
	;;
esac
done</args>
     <hidexbmc>false</hidexbmc>
   </player>
 </players>
</playercorefactory>
